<?xml version="1.0" encoding="utf-8"?>
<executable>
  <category>Utilities.CSIM Supporting Modules.Baby Brain</category>
  <title>Brain Volume Refinement</title>
  <description><![CDATA[This is a CLI module for brain volume refinement, which is useful to correct the outside frontier of the brain when the brain extraction correction left some non-brain areas behind.]]></description>
  <version>0.0.1</version>
  <documentation-url>https://www.slicer.org/wiki/Documentation/Nightly/Modules/BrainVolumeRefinement</documentation-url>
  <license>Slicer</license>
  <contributor>Antonio Carlos da S. Senra Filho (University of Sao Paulo)</contributor>
  <acknowledgements>This work was partially funded by CNPq grant 405574/2017-7</acknowledgements>
  <parameters>
    <label>IO</label>
    <description><![CDATA[Input/output parameters]]></description>
    <image type="scalar">
      <name>inputVolume</name>
      <label>Input Volume</label>
      <channel>input</channel>
      <index>0</index>
      <description><![CDATA[Input volume]]></description>
    </image>
    <image type="scalar">
      <name>updatedVolume</name>
      <label>Updated Volume</label>
      <channel>output</channel>
      <index>1</index>
      <description><![CDATA[Updated Volume]]></description>
    </image>
    <image type="label">
      <name>updatedMask</name>
      <label>Updated Brain Mask</label>
      <longflag>--updatedMask</longflag>
      <channel>output</channel>
      <description><![CDATA[Updated Brain Mask]]></description>
    </image>
  </parameters>
  <parameters>
  <label>Brain Volume Refinement Parameters</label>
    <description><![CDATA[Brain volume refinement parameters]]></description>
    <integer-vector>
      <name>neighborRadius</name>
      <longflag>--neighborRadius</longflag>
      <flag>r</flag>
      <label>Neighborhood Radius</label>
      <description><![CDATA[A list of 3 values indicating the (x,y,z) size of the neighborhood. This should large enough in order to get the bounderie tissues present in the input image. The neighborhood is running over the contour of the input mask. Example: a radius of (1,1,1) creates a neighborhood of (3,3,3).]]></description>
      <default>10,10,10</default>
    </integer-vector>
    <integer-vector>
      <name>medianRadius</name>
      <longflag>--medianRadius</longflag>
      <flag>m</flag>
      <label>Median Radius</label>
      <description><![CDATA[A list of 3 values indicating the (x,y,z) size of median filter.]]></description>
      <default>5,5,5</default>
    </integer-vector>
    <integer>
      <name>majorityThreshold</name>
      <longflag>--majorityThreshold</longflag>
      <flag>t</flag>
      <label>Majority Threshold</label>
      <description><![CDATA[Majority threshold. It is the number of pixels over 50% that will decide whether an OFF pixel will become ON or not. For example, if the neighborhood of a pixel has 124 pixels (excluding itself), the 50% will be 62, and if you set upd a Majority threshold of 5, that means that the filter will require 67 or more neighbor pixels to be ON in order to switch the current OFF pixel to ON. The default value is 1.]]></description>
      <default>1</default>
    </integer>
    <integer>
      <name>numberOfIterations</name>
      <longflag>--iterations</longflag>
      <flag>i</flag>
      <label>Number Of Iterations</label>
      <description><![CDATA[Maximum number of iterations. The brain mask is iterativelly updated in order to vanish bigger error in the previous brain extraction result. If your image presents lighter errors, it should be decreased. On the contrary, if your image presents a lot of non-brain areas (e.g. dura matter), it should be increased.]]></description>
      <default>10</default>
    </integer>
  </parameters>
</executable>
